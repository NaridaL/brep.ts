<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<script type="text/javascript">
			window.onerror = function (errorMsg, url, lineNumber, column, errorObj) {
						console.log(errorMsg, url, lineNumber, column, errorObj);
					}
			</script>
		<script type="text/javascript" src="src/NLA.js"></script>
		<script type="text/javascript" src="src/shaders.js"></script>
		<script type="text/javascript" src="src/Vector3.js"></script>
		<script type="text/javascript" src="src/Matrix4x4.js"></script>
		<script type="text/javascript" src="src/Plane3.js"></script>
		<script type="text/javascript" src="src/Line3.js"></script>

		<script type="text/javascript" src="src/js3d.js"></script>
		<script type="text/javascript" src="src/modes.js"></script>
		<script type="text/javascript" src="src/SketchBezier.js"></script>
		<script type="text/javascript" src="src/lightgl.js"></script>
		<script type="text/javascript" src="MooTools-Core-1.6.0.js"></script>
		<script type="text/javascript" src="earcut.dev.js"></script>
		<script type="text/javascript" src="src/Curve.js"></script>
		<script type="text/javascript" src="src/Surface.js"></script>
		<script type="text/javascript" src="src/EllipseCurve.js"></script>
		<script type="text/javascript" src="src/ProjectedCurveSurface.js"></script>
		<script type="text/javascript" src="src/BezierCurve.js"></script>
		<script type="text/javascript" src="src/EllipsoidSurface.js"></script>
		<script type="text/javascript" src="src/brep2.js"></script>
		<script type="text/javascript" src="src/b2.generators.js"></script>

		<script type="text/javascript">window.onload = main</script>

		<script id="template" type="x-template">
            <div>
	            <span style="width: 10em; display: inline-block; text-transform: uppercase">$what</span>
	            $name <a href="#" class="unsel icon-link">U</a>
	            <a href="#" class="featureDelete icon-link remove" name="delete">&#x274C;</a></div>
        </script>
		<script id="templateConstraint" type="x-template">
            <div>
	            $name
	            <a href="#" class="featureDelete icon-link remove">&#x274C;</a></div>
        </script>
		<script id="templateDistance" type="x-template">
            <div>$name <input class="distanceInput" type="text" id="distanceInput$id" />
            <a href="#" class="featureDelete icon-link remove">&#x274C;</a>
            </div>
        </script>
		<script id="templateAngle" type="x-template">
            <div>$name
	            <input class="distanceInput" type="text" id="distanceInput$id" />
	            <a href="#" class="fa">FA</a>
	            <a href="#" class="fb">FB</a>
	            <a href="#" class="fv">FV</a>
	            <a href="#" class="featureDelete icon-link remove">&#x274C;</a></div>
        </script>
		<script id="templateConstraintSub" type="x-template">
			<div>
				<span style="width: 10em; display: inline-block; text-transform: uppercase">$what</span>
				$name <a href="#" class="removeFromConstraint">Free</a></div>
		</script>
		<script id="templateFeatureExtrude" type="x-template">
			<div>
				<span style="width: 8em; display: inline-block">$what</span>
				<span style="width: 8em; display: inline-block;color: purple;">$name</span>
				<a class="featureDelete icon-link" name="delete">&#x274C;</a>
				<a class="featureEdit icon-link" name="edit">&#x1f589;</a>
				<a class="featureHide icon-link" name="toggleHide">&#x1f441;</a>
				<span style="cursor:help; display:none; color:red; font-weight: bold" name="error">âš </span></div>
		</script>

		<style type="text/css">
			body {
				font-family: Verdana;
			}
			.selector {
				border: 1px solid black;
				cursor: pointer;
				display: inline-block;
				width: 10em;
			}
			.selecting {
				border-color: darkred;
				color: darkgreen;
			}
			.icon-link {
				text-decoration: none;
				color: darkred;
			}

			.editorBox {
				background: #eeeeee;
				padding: 4px;
				display: none;
				margin: 8px;
			}
			.editorBox .header {
				font-weight: bold;
			}
			label {
				display: block;
			}
			label span {
				display: inline-block;
				width: 7em;
			}
			.featureHide.hidden {
				text-decoration: line-through;
				color: darkgrey;
			}
		</style>
	</head>
	<body>
	<canvas id="myCanvas" width="1200" height="600" style="border:1px solid #000000;"></canvas>
	<canvas id="textTextureCanvas" style="display: none;top: 80px; left: 8px; z-index: 1000" width="64" height="64"></canvas>
	<br />
	<div id="featureDisplay"

	     style="background:#eeeeee; padding:4px;position: absolute; top: 40px; left: 8px; z-index: 1000;width: 20%; ">
		TEEEST</div>
	<div style="position: absolute; top: 20px; right: 8px; z-index: 1000;width: 20%; ">
		<div id="sketchEditor" class="editorBox">
			Edit Sketch
			<input type="text" name="name" id="sketchEditorSketchName" class="string-id-input" />
			<label><span>On Plane</span>
			<div id="sketchEditorPlaneName" class="plane-select selector" name="planeName">&nbsp;</div></label>

			<button name="done">Done</button>
			<button name="delete">Delete</button>
		</div>

		<div id="selectedStuff" class="editorBox" style="display: block;">
			<span class="header">Elements</span>
			<div id="selectedElements"></div>
			<span class="header">Constraints</span>
			<div id="selectedConstraints"></div>
		</div>

		<div id="saveLoad" class="editorBox" style="display: block;">
			<div>
				<input type="text" id="saveNameInput" />
				<button id="saveButton">Save</button>
			</div>
			<select id="loadSelect">
				<option>Choose save to load</option>
			</select>
		</div>
		<div id="modeBox" class="editorBox" style="display: block;">
		</div>


		<div id="planeDefiner" class="editorBox">
			<span class="header">Define Plane</span>
			<input type="text" id="planeDefinerPlaneId" class="string-id-input" name="planeId"/>
			<select name="planeType" class="select-select">
				<option value="face">Face</option>
				<option value="points">Through Points</option>
				<option value="anchorNormal">Anchor & Normal</option>
				<option value="immediate">Immediate</option>
			</select>
			<div name="">
				<label>
				<span>Select face</span>
				<div id="planeDefinerFaceId" class="face-select selector" name="faceName">&nbsp;</div></label>
				<label><span>Offset</span>
					<input type="" class="dimension-input" id="planeDefinerOffset" defaultValue="0" name="offset" /></label>

			</div>
			<div name="">
				Input
				<input class="select-text" name="source" />
			</div>
			<button name="done">Done</button>
			<button name="delete">Delete</button>
		</div>

		<div id="extrudeEditor" class="editorBox">
			<span class="header">Extrude</span>
			<input type="text" name="name" class="plane-id string-id-input" />
			<label>
				<span>Select Loop</span>
				<div class="segment-select selector" name="segmentName">&nbsp;</div></label>
			<label><span>Start</span> <input type="text" class="dimension-input" name="start" defaultValue="0" /></label>
			<label><span>End</span> <input type="text" class="dimension-input" name="end" defaultValue="0" /></label>
			<select name="operation" class="select-select">
				<option value="minus">Difference</option>
				<option value="plus">Union</option>
				<option value="and">Intersection</option>
			</select>
			<button name="done">Done</button>
			<button name="delete">Delete</button>
		</div>
	</div>
	<div id="buttonbar" style="position: absolute; top: 8px; left: 8px; z-index: 1000">
		<button type="button" onclick="clicky()">Step</button>
		<button type="button" id="clearmode">Clear Mode</button>
		<button type="button" class="sketchControl" onclick="modePush(MODES.ADD_SEGMENT, SketchLineSeg);">Add Segments</button>
		<button type="button" class="sketchControl" onclick="modePush(MODES.ADD_SEGMENT, SketchArc);">Add Arc</button>
		<button type="button" class="sketchControl" onclick="modePush(MODES.ADD_SEGMENT, SketchBezier);">Add Curve</button>
		<button type="button" onclick="modePush(MODES.SKETCH)">Add Sketch</button>
		<button type="button" onclick="modePush(MODES.PLANE_DEFINITION)">Add Plane</button>
		<button type="button" onclick="modePush(MODES.EXTRUDE)">Extrude</button>
		<button type="button" class="sketchControl" onclick="modePush(MODES.ADD_POINTS);">Add Points</button>
		<button type="button" class="sketchControl" onclick="makeGroup('parallel');">Parallel</button>
		<button type="button" class="sketchControl" onclick="makePerpendicular();">Perpendicular</button>
		<button type="button" class="sketchControl" onclick="makeGroup('equalLength');">Equal Length</button>
		<button type="button" class="sketchControl" onclick="makeSelCoincident();">Coincident</button>
		<button type="button" class="sketchControl" onclick="selPointOnLine();">Point on Line</button>
		<button type="button" class="sketchControl" onclick="makeGroup('colinear');">Colinear</button>
		<button type="button" class="sketchControl" onclick="makeDistance()">Distance</button>
		<button type="button" class="sketchControl" onclick="makeAngle();">Angle</button>
		<button type="button" class="sketchControl" onclick="faceSketchPlane();">Face Sketch Plane</button>
	</div>
	</body>
</html>